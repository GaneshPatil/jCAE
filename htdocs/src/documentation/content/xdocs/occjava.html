<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
 "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title> jCAE - occjava </title>
	</head>
	<body>
	<h1>What is occjava</h1>
<p>occjava is a JNI wrapper which allows using OpenCASCADE from Java. Prior to jCAE 0.11, wrapper was
handwritten, but starting from 0.11 version, it is generated by <a href="http://www.swig.org">swig</a>.</p>
<h1>Setting the environment</h1>
<p>These scripts aim at showing how to configure your environment to use occjava.</p>
<h2>On Linux</h2>
<pre class="code">
#path to Opencascade
CASROOT="/a/path/OpenCASCADE6.2.0/ros"

#directory which contains liboccjava.so
occjavaDir="/a/path/jcae-0.15.0/jcae/modules/lib"

#set the LD_LIBRARY_PATH so Java can find the native libraries
export LD_LIBRARY_PATH=$CASROOT/Linux/lib:$occjavaDir

#Opencascade require it (don't ask why and don't forget it)
export MMGT_OPT=0

#Run java
java -classpath /a/path/occjava.jar:my_app_classpath my.application.MainClass

#Or like this if you want to visualize the geometry
java -classpath /a/path/occjava.jar:/a/path/jcae-viewer3d.jar:my_app_classpath my.application.MainClass
</pre>
<h2>On Windows</h2>
<pre class="code">
REM path to Opencascade (should be set by the Opencascade installer)
set CASROOT=C:\a\path\OpenCASCADE6.2.0\ros

REM directory which contains occjava.dll
set occjavaDir=C:\a\path\jcae-0.15.0\jcae\modules\lib

REM set the PATH so Java can find the native libraries
set PATH=%CASROOT%\win32\bin;%occjavaDir%;%PATH

REM Opencascade require it (don't ask why and don't forget it)
set MMGT_OPT=0

REM run java
java -classpath c:\a\path\occjava.jar;[my_app_classpath] my.application.MainClass

REM Or like this if you want to visualize the geometry
java -classpath c:\a\path\occjava.jar;c:\a\path\jcae-viewer3d.jar;[my_app_classpath] my.application.MainClass
</pre>
<h2>In Eclipse</h2>
<ul>
	<li>Go to Project, Properties, Java Build Path, Add external jar, and add occjava.jar.</li>
	<li>Before running go to Run, Run..., [your main class], Environment, and the PATH or LD_LIBRARY_PATH as specified above.</li>
</ul>
<h1>Examples</h1>
<dl>
	<dt><a href="http://gitorious.org/jcae/jcae/blobs/raw/master/occjava/src-java-test/org/jcae/opencascade/jni/Explorer.java">Explorer.java</a></dt>
	<dd>Topology exploration (TopoDS_Iterator and TopEx_Explorer)</dd>

	<dt><a href="http://gitorious.org/jcae/jcae/blobs/raw/master/occjava/src-java-test/org/jcae/opencascade/jni/BRepBuilder.java">BRepBuilder.java</a></dt>
	<dd>Remove and compose shapes</dd>

	<dt><a href="http://gitorious.org/jcae/jcae/blobs/raw/master/occjava/src-java-test/org/jcae/opencascade/jni/Dimensions.java">Dimensions.java</a></dt>
	<dd>Get the dimensions of a shape</dd>

	<dt><a href="http://gitorious.org/jcae/jcae/blobs/raw/master/occjava/src-java-test/org/jcae/opencascade/jni/Curvature.java">Curvature.java</a></dt>
	<dd>Surface local properties (coordinates, derivatives, curvature ...)</dd>
</dl>
<p>More examples can be found <a href="http://gitorious.org/jcae/jcae/blobs/master/occjava/src-java-test/org/jcae/opencascade/jni/">here</a>.</p>
<h1>Extending</h1>
<p>Here are the steps to extend <cite>occjava</cite>:</p>
<ul>
	<li>Be sure you really need to extend occjava. May be it is possible to do what you want with existing API and 5 lines of pure Java code.</li>
	<li>Use your prefered <cite>Git</cite> client to get the sources of
		<cite>occjava</cite> from <a href="http://gitorious.org/jcae/jcae.git">http://gitorious.org/jcae/jcae.git</a></li>
	<li>Read these pages and build it:
		<ul>
			<li><a href="developers.html#Compiling+occjava-swig">developers.html#Compiling+occjava-swig</a></li>
			<li><a href="https://sourceforge.net/forum/forum.php?thread_id=1515918&amp;forum_id=253751">
				https://sourceforge.net/forum/forum.php?thread_id=1515918&amp;forum_id=253751</a></li>
		</ul>
	</li>
	<li>Find the file you need to modify (or even create) among the
		<code>src/*.i</code> files. The file name should be the Opencascade package name.
		For instance if you want to add <code>BRepTools::OuterWire</code>, do it within
		<code>src/BRepTools.i</code>. The <code>TopoDS_Shape</code> class is in
		<code>TopoDS.i</code>. There are still dirty things and you may also have to
		look in <code>OccJava.i</code> (use grep).
	</li>
	<li>To add a method in an existing class just copy the method prototype from the .hxx file
		(without the <code>EXPORT</code> keyword).</li>
	<li>To add a class add <code>%{#include &lt;MyOccClass.hxx&gt; %}</code>
		and describe your class as in a hxx file (without EXPORT keyword). Add only the
		method you need (<code>occjava</code> should remain as small as possible). Use
		<code>%rename</code> to let methods match the <a
		href="http://java.sun.com/docs/codeconv/">Java coding convention</a>. Look at
		already existing classes if you feel lost.</li>
	<li>To add typemap (native to Java type conversion), have a look at examples in <code>gp.i</code>.
		Adding typemap is not imediate, you may have to read the
		<a href="http://www.swig.org/Doc1.3/Java.html">Swig/Java</a> documentation.</li>
	<li>Send us your patch <a href="https://sourceforge.net/tracker/?group_id=74334&amp;atid=540662">here</a>.</li>
</ul>
</body></html>
