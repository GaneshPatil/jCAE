Thu Feb 15 10:44:59 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/TraversalProcedure.java: Modify signature of
	all methods, the OEMM instance which is walked through is passed as
	first parameter.
	* src/org/jcae/mesh/oemm/OEMMNode.java: Remove 'topDir' member.

Wed Feb 14 17:28:19 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/RawOEMM.java: Replace own implementation
	of linked lists by ArrayList.
	* src/org/jcae/mesh/oemm/RawStorage.java: In dispatch(), use a map
	for buffering values on octree cells instead of OEMMNode.extra.
	* src/org/jcae/mesh/oemm/OEMMNode.java: Remove 'extra' member.

Wed Feb 14 14:50:37 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/Storage.java
	  src/org/jcae/mesh/oemm/RawOEMM.java
	  src/org/jcae/mesh/oemm/OEMM.java
	  src/org/jcae/mesh/oemm/RawStorage.java: Rename OEMM.nr_levels
	into OEMM.depth; this field now always store OEMM depth, and is
	set as "private transient".

Tue Feb 13 15:34:15 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/metrics/Quadric3DError.java: Previous
	fix was incorrect, an edge must not be contracted if any of its
	endpoints is not writable, because its neighborhood is not fully
	known.

Mon Feb 12 12:46:06 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/OEMM.java: Fix array length in getCoords().

Fri Feb  9 16:50:45 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/*.java: Use standard serialization to
	store OEMM and OEMMNode instances.

Thu Feb  8 17:57:02 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/Storage.java: This new class contains
	reader and writer methods for OEMM structures.
	* src/org/jcae/mesh/oemm/IndexedStorage.java: Class removed,
	indexOEMM() is moved into RawStorage, and other methods have been
	moved into Storage.

Thu Feb  8 16:35:09 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/IndexedStorage.java: Modify internal format
	of OEMM "*a" files.

Wed Feb  7 16:24:16 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/metrics/Quadric3DError.java: When loading
	partial mesh through OEMM, do not contract edges when both endpoints
	are not writable.

Tue Feb  6 12:36:26 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/OEMMMesh.java
	  src/org/jcae/mesh/oemm/OEMMTriangle.java
	  src/org/jcae/mesh/oemm/OEMMVertex.java: Remove useless classes.
	* src/org/jcae/mesh/amibe/algos3d/AbstractAlgoHalfEdge.java: Also
	add penalty to edges which cannot be contracted when "maxtriangles"
	parameter is set.

Sun Feb  4 23:47:56 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MeshToSoupConvert.java: Ensure that nodes
	on boundary faces have the same coordinates on all faces.

Sun Feb  4 02:34:17 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/IndexedStorage.java
	  src/org/jcae/mesh/oemm/OEMMViewer.java: Display free edges in red.

Thu Feb  1 18:46:38 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/IndexedStorage.java
	  src/org/jcae/mesh/oemm/OEMMNode.java: In OEMM structure file, write
	file names relative to top-level directory so that the whole OEMM
	directory can be renamed without trouble.

Wed Jan 24 14:35:05 CET 2007 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/IndexedStorage.java: Add a missing close()
	statement.

Thu Dec 21 15:39:46 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/patch/QuadTree.java
	  src/org/jcae/mesh/amibe/util/OcTree.java: Replace QuadTree
	and Octree classes by...
	* src/org/jcae/mesh/amibe/util/KdTree.java: generic KdTree.

Sat Dec 16 15:37:16 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: Fix nextOTriApexLoop().

Fri Dec 15 15:51:58 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java (canContract): Fix
	topology check.
	* src/org/jcae/mesh/amibe/util/QSortedTreeNode.java: Make this an
	inner class of QSortedTree.

Wed Dec 13 07:59:35 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/QSortedTree.java
	  src/org/jcae/mesh/amibe/util/QSortedTreeNode.java: Abstract classes
	to define binary trees.
	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java: Use these new classes.
	* src/org/jcae/mesh/amibe/util/PRedBlackSortedTree.java: New class,
	red-black tree.

Tue Dec 12 13:15:57 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java: Update balance
	factors in rotateL() and rotateR() to improve readability.

Mon Dec 11 13:25:29 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/HalfEdge.java: Fix nextApexLoop().

Tue Dec  5 17:53:09 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/HalfEdge.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java: Modify hasAttributes()
	methods so that hasAttributes(FOO|BAR) is equivalent to
	hasAttributes(FOO) || hasAttributes(BAR), this is more natural than
	current behaviour: hasAttributes(FOO) && hasAttributes(BAR).

Fri Dec  1 13:05:28 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java: New outerVertex member,
	which will replace Vertex.outer.
	* src/org/jcae/mesh/amibe/ds/HalfEdge.java: nextOriginLoop() and
	nextApexLoop() can check OUTER attributes
	* src/org/jcae/mesh/amibe/ds/Mesh.java: Remove useless members:
	type, scaleX, scaleY.

Thu Nov 30 17:03:16 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java: Nex isEmpty()
	method. Replace first(), last(), next() and prev() by iterator()
	and backwardIterator();

Tue Nov 28 13:27:28 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Triangle.java: In Triangle(Vertex [] v)
	constructor, do not call Vertex.setLink(), let the caller handle
	Vertex links.
	* src/org/jcae/mesh/amibe/ds/HalfEdge.java: New split() method.
	* src/org/jcae/mesh/amibe/algos3d/AbstractAlgoHalfEdge.java:
	New class, to provide a skeleton for HalfEdge based algorithms.
	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/algos3d/SplitEdge.java: Rewritten to
	extend AbstractAlgoHalfEdge.
	* src/org/jcae/mesh/amibe/util/PAVLSortedTree2.java
	  src/org/jcae/mesh/amibe/util/PAVLNode.java
	  src/org/jcae/mesh/amibe/util/PAVLNodeOTriangle.java: These classes
	are removed.  When algorithms use edge-based quality criterion, it is
	much more efficient to call Mesh.buildEdges() and use
	AbstractAlgoHalfEdge.

Mon Nov 27 15:58:46 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java: Pass
	arguments through a Map.

Sun Nov 26 00:02:52 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java (buildAdjacency): Fix adjacency
	relations when reading non manifold meshes.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (getNeighboursNodes): Make
	this method more efficient; its return value has been changed to
	a Collection.

Fri Nov 24 19:38:29 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/MMesh3D.java
	  src/org/jcae/mesh/amibe/ds/MFace3D
	  src/org/jcae/mesh/amibe/ds/MNode3D.java: Modify MMesh3D to extend
	Mesh; MFace3D and MNode3D are removed, and replaced respectively by
	Triangle and Vertex.  For now, normals are no more written into
	output files.
	* src/org/jcae/mesh/amibe/ds/Triangle.java (listLock, listCollect,
	listRelease): Replace list operations by a Triangle.List inner class,
	in order to remove static definitions.

Fri Nov 24 11:05:19 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/CADExplorer.java
	  src/org/jcae/mesh/cad/CADShapeEnum.java: Remove shape type enum
	definitions from CADExplorer, this feature is now implemented in
	OCCShapeEnum.
	* src-occ/org/jcae/mesh/cad/occ/OCCShapeEnum.java: New class,
	extends CADShapeEnum.
	* src-occ/org/jcae/mesh/cad/occ/OCCExplorer.java (init): Use shape
	types from OCCShapeEnum.
	* src/org/jcae/mesh/amibe/ds/Triangle.java: adjPos was a packed
	representation into an int of edge attributes and adjacent local
	numbers.  It turns out that this representation is not that
	efficient, thus let adjPos only contain adjacent local numbers,
	and edgeAttributes is a new byte[3] array to store edge attributes.
	These members are now private.
	Add a new copy() to let OTriangle2D.split3() have a backup copy of
	Triangle instances.

Thu Nov 23 20:19:55 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/CADExplorer.java: Change signature to
	void init(CADShape shape, CADShapeEnum type).

Thu Nov 23 12:20:54 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java: Remove mesh member.
	This means that routines modifying mesh topology (by adding or
	removing a vertex or triangle) have a new Mesh argument, as
	well as routines performing computations on 2D parametrized
	surfaces.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/patch/Mesh2D.java: New Mesh2D class,
	which extends Mesh.  This class is designed specifically for
	meshing parametrized surfaces.
	* src/org/jcae/mesh/amibe/mesher/ds/MMesh1D.java: Replace HashSet
	and HashMap instances by their Linked* counterpart, so that 1D
	mesh does not depend on objects location in memory.
	* src/org/jcae/mesh/amibe/algos3d/SmoothNodes3D.java: Pass options
	as a map, and add another option to preserve patch boundary.

Wed Nov 22 13:23:40 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/XMLHelper.java (writeXML): Close output
	stream after file is written, this was not done automatically.

Tue Nov 21 13:06:24 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/VolMesh.java: Dummy data structure to
	read/write volume meshes.
	* src/org/jcae/mesh/bora/xmldata/MESHReader.java: Read .mesh
	files with tetrahedra and return a VolMesh instance.

Sat Nov 18 20:19:59 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/CADShapeEnum.java: New class, to implement
	safe CAD type enumeration.

Fri Nov 17 22:36:52 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/ds/Vertex2D.java: New Vertex2D class
	extending Vertex to handle meshes on parametrized surfaces.
	This will save some space for 3D meshes.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java: Replace Mesh.newVertex()
	by Vertex.valueOf(), to follow Java convention on naming static
	factory methods.
	* src/org/jcae/mesh/amibe/**.java: Above changes have to be
	propagated to almost all source files.

Wed Nov 15 12:13:10 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/java3d/Viewer.java: Add a key listener.

Mon Nov 13 10:40:18 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/CADShape.java
	  src-occ/org/jcae/mesh/cad/occ/OCCShape.java: Move CADShape.id member...
	* src/org/jcae/mesh/bora/ds/Mesh.java: ... here.
	* src-occ/org/jcae/mesh/cad/occ/OCCIterator.java
	  src-occ/org/jcae/mesh/cad/occ/OCCCompSolid.java
	  src/org/jcae/mesh/cad/CADIterator.java
	  src/org/jcae/mesh/cad/CADCompSolid.java: New CAD entities.
	* src/org/jcae/mesh/cad/CADShapeBuilder.java
	  src-occ/org/jcae/mesh/cad/occ/OCCShapeBuilder.java: New newIterator()
	method to iterate on direct children.
	* src/org/jcae/mesh/bora/xmldata/BModelReader.java
	  src/org/jcae/mesh/bora/xmldata/BModelWriter.java
	  src/org/jcae/mesh/bora/ds/BModel.java
	  src/org/jcae/mesh/bora/ds/BCADGraph.java
	  src/org/jcae/mesh/bora/ds/BCADGraphCell.java
	  src/org/jcae/mesh/bora/ds/BGroup.java: New classes.

Thu Nov  9 17:32:00 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/bora/algo/Netgen.java
	  src/org/jcae/mesh/bora/algo/TeTgen.java: Add wrappers for Netgen
	and TetGen 3D meshers.

Wed Nov  8 13:24:40 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/bora: Improve support for different mesh
	constraints, and move src/org/jcae/mesh/amibe/constraints into
	src/org/jcae/mesh/bora.
	* src/org/jcae/mesh/mesher/ds/MMesh0D.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java: Allow initialization
	from within bora meshes.
	* src/org/jcae/mesh/xmldata/Bora1DWriter.java
	  src/org/jcae/mesh/xmldata/Bora1DReader.java: New I/O helpers.

Mon Nov  6 09:36:57 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java: Make the mesh member
	non-static.

Fri Nov  3 18:02:19 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java: This class does
	not need to be synchronized.

Fri Nov  3 15:16:22 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/metrics/Quadric3DError.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: In Decimate*
	algorithms, reuse v3 to avoid allocating new Vertex instances.

Fri Nov  3 12:20:09 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: Let computeNormal3D()
	and computeNormal3DT() return triangle area instead of 2*area.
	This does not change current computations, but is less confusing.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (clone): Revert previous
	optimization, it was plain broken.

Thu Nov  2 17:29:22 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Matrix3D.java: New
	apply(double [] in, double [] out) method to reduce array allocation.
	* src/org/jcae/mesh/amibe/metrics/Quadric3DError.java: Use it.
	* src/org/jcae/mesh/amibe/metrics/Quadric3DError.java: Replace
	Quadric3DError(q1,q2) constructor by a new computeQuadric3DError(q1,q2)
	method.
	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Reuse existing
	Quadric3DError instances to avoid allocations.  The nodeset variable
	is not really useful, so drop it.
	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java (update): When
	a node value is modified, internal map does not have to be touched.

Thu Nov  2 10:06:08 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Apply
	yesterday's optimization to DecimateVertex too.

Wed Nov  1 18:04:40 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java: Some edges
	cannot be contracted because of geometry or topology reasons.  A
	penalty is now added to these edges so that they are not processed
	too much often.  They must not be discarded entirely because they
	may be contracted later if their neighboorhood changes.

Tue Oct 31 23:39:49 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric3D.java: New det() method.
	* src/org/jcae/mesh/amibe/metrics/Quadric3DError.java: Improve
	handling of degenerated cases.

Tue Oct 31 11:30:01 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java
	  src/org/jcae/mesh/oemm/IndexedStorage.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Define Mesh.triangleList
	as a Collection so that algorithms can choose to use an HashSet to
	speed up triangle removal.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (clone): Optimization:
	Construct param[] only if needed.
	* src/org/jcae/mesh/amibe/metrics/Quadric3DError.java
	  src/org/jcae/mesh/amibe/metrics/Matrix3D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Store
	  Matrix3D.data in a double[9] array instead of double[3][3] for
	  efficiency reasons.  New Quadric3DError class, to refactor code
	  in Decimate* algorithms.

Mon Oct 30 23:09:36 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java (isValid): Check that symmetric
	OTriangle instances are consistent with respect to boundary tag.
	* src/org/jcae/mesh/amibe/ds/HalfEdge.java: New swap() method.
	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java: Add edge
	swapping, DecimateHalfEdge can now be used instead of DecimateVertex.

Mon Oct 30 16:59:16 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Increase
	penalty for boundary edges.
	* src/org/jcae/mesh/amibe/ds/HalfEdge.java: OTriangle is not well
	suited for some algorithms, like DecimateVertex.  This new HalfEdge
	class gives access to edge objects and will improve performance for
	these algorithms.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/Triangle.java: Add support for HalfEdge.
	* src/org/jcae/mesh/amibe/algos3d/DecimateHalfEdge.java: New
	decimation algorithm, based on HalfEdge structure.  It is not
	equivalent to DecimateVertex because edges are not swapped yet.

Thu Oct 26 14:14:43 CEST 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/constraints: Add initial support for
	  different mesh constraints.

Fri Oct 13 17:17:30 CEST 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/validation/MinAngleFace.java: Also handle
	Triangle elements.

	* src/org/jcae/mesh/MeshValidOEMM.java: New program to validate
	triangle soups; this is needed because large meshes cannot be
	processed by MeshValid3D.
	* src/org/jcae/mesh/oemm/RawStorage.java: New getFacesIterator()
	method.

	* src/org/jcae/mesh/cad/CADExplorer.java: Add COMPSOLID.

Wed Oct 11 15:10:08 CEST 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCShape.java: The object returned by
	OCCShape.reversed() has the same class as original.

Tue Oct 10 16:11:07 CEST 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java: Mesh faces only once even of they
	appear with different orientations.

Fri Apr  7 10:46:00 CEST 2006 Jerome Robert <jeromerobert@users.sourceforge.net> 

	* build.properties, build.xml, src/org/jcae/mesh/MeshView.java,
	  src/org/jcae/mesh/java3d/ComputeEdgesConnectivity.java,
	  src/org/jcae/mesh/java3d/XMLBranchGroup.java,
	  src/org/jcae/mesh/xmldata/MMesh1DReader.java,
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java,
	  src/org/jcae/mesh/xmldata/MeshReader.java,
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java,
	  src/org/jcae/mesh/xmldata/MeshToSoupConvert.java: Used XPath
	  standard API. Xalan is no longer required with Java 1.5 but it is
	  required with Java 1.4.

Thu Apr  6 17:24:19 CEST 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/Initial.java:  Detect boundary intersection.

Thu Mar 23 15:36:46 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos1d/UniformLengthDeflection.java: Apply the same change as in UniformLength.

Wed Mar 22 09:42:45 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src/org/jcae/mesh/Mesher.java: Add a new org.jcae.mesh.Mesher.isotropic property. It is true by default. If set to false, 2D mesh is anisotropic.

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/xmldata/UNVConverter.java: New org.jcae.mesh.exportPOLY property.

	* src/org/jcae/mesh/amibe/ds/Vertex.java: Fix a NullPointerException with large deflection parameters.  See http://sourceforge.net/tracker/index.php?func=detail&aid=1452490&group_id=74334&atid=540660

	* src/org/jcae/mesh/mesher/algos1d/UniformLength.java: When an edge is discretized with only 2 points, add 1 more point (and not 2) if the curve is not flat.

	* src/org/jcae/mesh/cad/CADCompound.java
	  src/org/jcae/mesh/cad/CADShell.java
	  src/org/jcae/mesh/cad/CADSolid.java
	  src-occ/org/jcae/mesh/cad/occ/OCCCompound.java
	  src-occ/org/jcae/mesh/cad/occ/OCCShell.java
	  src-occ/org/jcae/mesh/cad/occ/OCCSolid.java
	  src/org/jcae/mesh/cad/CADExplorer.java:  Add support for new geometrical shapes.
	* src/org/jcae/mesh/cad/CADShapeBuilder.java
	  src-occ/org/jcae/mesh/cad/occ/OCCShapeBuilder.java:  Add support for boolean operators.

	* src/org/jcae/mesh/amibe/algos2d/CheckDelaunay.java: When an edge is swapped, its neighbours have to be checked again.

Tue Mar 21 16:21:09 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/algos2d/Initial.java: The procedure to perform the initial triangulation is moved into its own class.

Tue Feb 21 09:55:00 CET 2006 Jerome Robert <jeromerobert@users.sourceforge.net> 

	* src/org/jcae/mesh/amibe/algos3d/SmoothNodes3D.java: Add a main
	  method

Mon Feb 13 19:02:00 CET 2006 Jerome Robert <jeromerobert@users.sourceforge.net> 

	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Add command
	  line argument to decimate with a desired number of triangle

Wed Feb  8 10:26:00 CET 2006 Jerome Robert <jeromerobert@users.sourceforge.net> 

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Add unit group (164)
	  to UNV files

	* src/org/jcae/mesh/xmldata/UNVConverter.java: UNV Group 2430 is
	  obsolet, move to 2435.


Fri Jan 27 16:49:10 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/xmldata/UNVConverter.java: New org.jcae.mesh.exportSTL property.

Thu Jan 26 12:18:29 CET 2006 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Add a new constructor, to specify the number of triangles in final mesh.

Thu Dec  8 11:37:29 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/SwapEdge.java: New algorithm to swap an edge if its adjacent faces are coplanar.

Fri Dec  2 18:30:07 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java:  Move Vertex.findOTriangle() into OTriangle.find().

Wed Nov 30 15:18:48 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/QuadTree.java
	* src/org/jcae/mesh/amibe/util/QuadTreeTest.java: Rename QuadTree.QuadTreeCell into QuadTree.Cell
	* src/org/jcae/mesh/amibe/util/Octree.java
	* src/org/jcae/mesh/amibe/util/OctreeTest.java: Rename Octree.OctreeCell into Octree.Cell
	* src/org/jcae/mesh/amibe/util/Octree.java
	  src/org/jcae/mesh/amibe/util/QuadTree.java: Fix offset by one for nCells.
	* src/org/jcae/mesh/amibe/util/Octree.java: Enlarge bounding box to make sure that all nodes are interior.
	* src/org/jcae/mesh/amibe/util/Octree.java (getNearVertexInSubOctrees): Fix computation of initial target size.

Tue Nov 29 17:47:22 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java (discreteAverageNormal): Use area weighting.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (discreteProject): Get mean normal from discreteAverageNormal() instead of discreteCurvatures(), it seems too be much more reliable.
	* src/org/jcae/mesh/amibe/algos3d/SplitEdge.java: Use a new implementation of AVL binary trees.
	* src/org/jcae/mesh/amibe/util/QuadTree.java
	* src/org/jcae/mesh/amibe/ds/Mesh.java:  Remove the mesh attribute from QuadTree, and replace it by a Calculus instance, which is all that is needed to compute distances between vertices.

Tue Nov 29 12:22:39 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Call A.reset() in the constructor, because metrics are now initialized to the identity matrix.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Do not multiply quadrics by region area: this causes problems in Matrix3D.inv() to detect singular matrices.  Area is instead taken into account when adding quadrics.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java (inv):  Revert the change introduced on 2005-11-15, a better fix has been applied to DecimateVertex, see above.

Mon Nov 28 10:05:46 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/SplitEdge.java: Discrete differential operators are not defined on boundary nodes, thus consider only quadrics on interior nodes.
	* src/org/jcae/mesh/amibe/ds/Triangle.java (listCollect): Add element at the end of the linked list so that listCollect() can be called while iterating over existing elements.  A check is added to avoid circular loops.

Sun Nov 27 12:55:46 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Matrix.java
	  src/org/jcae/mesh/amibe/metrics/Matrix3D.java: Matrix was only used by Matrix3D, so merge it there.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java: Move prodSca(), norm() and prodVect3D() methods...
	* src/org/jcae/mesh/amibe/metrics/Matrix3D.java: ... here.

Thu Nov 24 10:25:17 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/validation/QualityFloat.java: Fix quality status reports.
	* src/org/jcae/mesh/amibe/algos2d/ConstraintNormal3D.java: New algo to fix inverted triangles.
	* src/org/jcae/mesh/amibe/algos2d/Insertion.java: Add a new argument to select the target length.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Call Insertion() with 16, 4 and 1 length factor in order to discretize large edges first. Call ConstraintNormal3D() to fix broken triangles.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Decimate boundary edges.  An option to select this behaviour or the previous one will be added later.
	* src/org/jcae/mesh/xmldata/MeshWriter.java: Write <groups> tag.

Wed Nov 23 12:47:56 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos3d/SmoothNodes3D.java: Project the new vertex location onto the quadrics.

Tue Nov 22 14:42:06 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Triangle.java: Add a new groupId attribute.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/xmldata/MeshReader.java: When reading 3D meshes, boundary nodes are preserved if they are contained in more than one group.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Swap edges when decimating.

Mon Nov 21 16:37:50 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/jcae.dtd 
	  src/org/jcae/mesh/amibe/ds/MGroup3D.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java: Add support for merging groups.
	* src/org/jcae/mesh/FuseGroups.java: New main program to fuse groups.

Sat Nov 19 19:32:13 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: New checkSwap3D() method.

Fri Nov 18 11:40:33 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: Remove getOTriangleAroundApexIterator().  This method was used to spin around a vertex to swap edges, and thus modifies edge connectivity while looping, which may be troublesome if caller is not careful enough.  The new nextOTriApexLoop() method has to be used instead.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/OTriangle2D.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java:
	  Replace OTriangle.getOTriangleAroundOriginIterator() by OTriangle.nextOTriOriginLoop().
	* src/org/jcae/mesh/amibe/ds/OTriangle.java
	* src/org/jcae/mesh/amibe/ds/OTriangle2d.java: Move isDelaunay() into OTriangle2d.

Thu Nov 17 17:42:59 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java (swapOTriangle): This routine is modified to minimize adjacency changes.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/OTriangle2D.java
	  src/org/jcae/mesh/amibe/algos2d/CheckDelaunay.java: Rename OTriangle.swapOTriangle() method into swap().

Tue Nov 15 11:22:22 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric3D.java (inv):  Improve check for singular matrices.

Thu Nov 10 17:53:16 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: New split() method.

Mon Nov  7 17:18:32 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos1d/UniformLength.java: Skip the deflection check on tiny edges.

Fri Oct 28 10:48:10 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java: New getOTriangleAroundOriginIterator() method to loop around a vertex.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/algos2d/Insertion.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle2D.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java: Outer triangles are readded into the mesh so that this loop can reach all edges.  But contrary to the previous implementation, outer triangles are not connected together, but only to their inner neighbour.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Swapping edges before inserting unner points is no more needed.

Tue Oct 25 13:31:08 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Triangle.java: Add a new linkNext member to allow creation of single linked lists of Triangle.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (getSurroundingOTriangle): Outer triangles have been removed from the mesh, which is thus no more convex.  The previous algorithm to check for an OTriangle containing the desired vertex may fail.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/Triangle.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java: When possible, replace ArrayList by Triangle linked list.

Fri Oct  7 17:34:43 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/Triangle.java: Fix orientation.

Mon Sep 12 11:16:23 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/xmldata/MeshReader.java: Out-of-core meshes will also use the Mesh class, so Mesh.dim is replaced by a Mesh.type attribute.
	* src/org/jcae/mesh/oemm/IndexedStorage.java: Out-of-core meshes use the same Mesh class instead of OEMMMesh.
	* src/org/jcae/mesh/amibe/ds/Triangle.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java: Add initial support for OEMM meshes.

Wed Aug 31 18:01:29 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/IndexedStorage.java
	  src/org/jcae/mesh/oemm/OEMMVertex.java: Convert vertex coordinates into doubles after OEMM is created.

Tue Aug 30 15:58:05 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java
	  src/org/jcae/mesh/xmldata/UNVConverter.java
	  src/org/jcae/mesh/xmldata/MeshToUNVConvert.java: New MeshToUNVConvert class to output UNV files as is done with jcae3d, ie. patch by patch.

Wed Aug 24 17:45:18 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/oemm/RawStorage.java: Remove Int10Array private class, it can be achieved with ByteBuffer.

Mon Aug 22 16:26:38 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MeshReader.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java
	  src/org/jcae/mesh/xmldata/MeshToSoupConvert.java
	  src/org/jcae/mesh/xmldata/MMesh1DReader.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java: Replace java.io by java.nio classes.

Thu Aug 11 12:35:45 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java (canContract): Allow outer edges to be contracted, since boundary edges may be contracted.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: When an edge cannot be contracted, it is not removed from the tree, but the next item is looked at.  This way, better candidates are always removed first.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (canContract): Readd topology checks, it seems that they are needed.  This requires further investigation.
	* src/org/jcae/mesh/amibe/ds/Triangle.java: New isBoundary() method, to check whether a triangle has an edge on a boundary.
	* src/org/jcae/mesh/amibe/algos2d/EnforceAbsDeflection.java: Do not split triangles which are on boundary patch, they give would worse quality triangles.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: When contracting an edge, choose the optimal placement for the new point.

Wed Aug 10 15:48:30 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric3D.java: new prodVect3D() method, works on an already allocated array.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/Triangle.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Triangle.normal3D() and OTriangle.normal3DT() return a newly allocated array.  These routines are replaced by methods which work on private OTriangle arrays.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (canContract): The last fixes made topology checks redundant, so remove them.

Tue Aug  9 13:45:32 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java (buildAdjacency): Add outer triangles to the mesh.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java: Do not implement Cloneable, it is no mire needed by DecimateVertex.  Fix contraction.  New normal3DT() method to return the normal to an edge in the triangle plane.  Use a better check to detect inverted triangles when contracting.
	* src/org/jcae/mesh/amibe/ds/NotOrientedEdge.java: New class, to handle edges when orientation is not needed.
	* src/org/jcae/mesh/amibe/algos3d/DecimateVertex.java: Unbreak this algorithm.

Wed Aug  3 14:05:07 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MeshWriter.java (writeObject3D): Fix jcae3d when writing 3D mesh.

Fri Jul 22 11:40:38 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java: Add a new 'dim' attribute to distinguish between 2D and 3D meshes.
	* src/org/jcae/mesh/amibe/ds/Vertex.java: Add clone() and findOTriangle() methods.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java: Rename updateAttributes() into pushAttributes(), and add a symmetric pullAttributes() method.  Add a contract() method.

Tue Jul  5 15:52:47 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java (buildAdjacency): Detect tangent points between surfaces.  These points must be immutable, even if they are interior to these surfaces.

Mon Jul  4 15:06:39 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/EnforceAbsDeflection.java
	  src/org/jcae/mesh/amibe/ds/MNode3D.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/util/tests/OctreeTestDisplayPLY.java
	  src/org/jcae/mesh/amibe/util/tests/OctreeTestRemove.java
	  src/org/jcae/mesh/amibe/validation/AbsoluteDeflection2D.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java
	  src/org/jcae/mesh/mesher/ds/MNode1D.java
	  src/org/jcae/mesh/xmldata/MMesh1DReader.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java
	  src/org/jcae/mesh/xmldata/MMesh3DWriter.java
	  src/org/jcae/mesh/xmldata/MeshReader.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Change policy about labels.  Previously labels were numbered from 0, and -1 meant an inner vertex.  But with 3D meshes we have to distinguish artificial boundaries from real mesh boundaries.  For this reason, 0 means now an inner vertex, positive values are for vertices on boundary mesh, and negative values are for vertices on artificial patch boundaries.

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/Triangle.java
	  src/org/jcae/mesh/xmldata/MeshReader.java: Change label sign for vertices on inner boundaries, if angle between triangles is lower than a limit which can be changed via the org.jcae.mesh.xmldata.MeshReader.ridgeAngleDegre property.
Fri Jul  1 16:40:03 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/PAVLSortedTree.java: Utility class to traverse mesh entities (vertices, edges, faces) according to some quality factor.
	* src/org/jcae/mesh/amibe/ds/Vertex.java: New distance3D() and angle3D() to perform computations in 3D space.

Thu Jun 30 16:06:45 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MMesh3DReader.java: Do not abort if the <normals> node is not present in jcae3d.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/xmldata/MeshReader.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Build adjacency relations when reading Mesh.  They are no more written onto disk.
	* src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/xmldata/MeshReader.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Vertex class can also be used to store 3D nodes, 

Tue Jun 28 12:32:12 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/tools/Calculus3D.java: If the org.jcae.mesh.amibe.ds.tools.Calculus3D.accurateDistance property is set to true, metrics on end points are compared and if they are very different, the segment is divided in order to have more accurate results.  This property is set to false by default because it is not clear whether this gives better results.

Mon Jun 27 13:50:34 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java: New moveTo() and getNeighboursNodes() methods, will be used by smoothing algorithms.
	* src/org/jcae/mesh/xmldata/MeshToSoupConvert.java: The soup file must be removed before processing, otherwise data are appended to previous runs.

Fri Jun 17 11:51:19 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java:  Display mesh information at the end of 3d generation.
	* src/org/jcae/mesh/xmldata/MeshToSoupConvert.java
	  src/org/jcae/mesh/Mesher.java:  Add a new org.jcae.mesh.Mesher.triangleSoup property to write a raw triangle soup which can be processed by oemm.  It is set to false by default.

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/cad/CADShapeBuilder.java
	  src/org/jcae/mesh/MeshValid2D.java
	  src/org/jcae/mesh/Mesher.java:  Properties with default values are currently not written into report file, thus always set these properties to have them written there.
	* src/org/jcae/mesh/Mesher.java: If the org.jcae.mesh.Mesher.reportFile property is set, a log report is printed into this file with details about meshing process.

Wed Jun  8 09:24:12 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/validation/QualityFloat.java:  Fix data number.

Fri May 20 14:15:32 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java:  Fix the detection of tiny edges, deflection criterion is now taken into account.
	* src-occ/org/jcae/mesh/cad/occ/OCCShape.java
	  src/org/jcae/mesh/cad/CADShape.java:  New boundingBox() method.
	* src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java:  Change length computation, it now uses GProp_GProps.

Mon May 16 15:23:46 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Discretized wires are discarded if they contain less than 3 points.

Thu May 12 11:19:29 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java: Export meshes only if org.jcae.mesh.Mesher.mesh3d property is true.  Add new org.jcae.mesh.exportMESH and org.jcae.mesh.exportUNV properties to be able to not export meshes.

Tue May 10 11:55:08 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/CheckDelaunay.java:  Replace a call to OTriangle.getOrientation() which has been removed.  Adjust the niter variable to break infinite loops earlier.

Tue May  3 08:42:05 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java: Remove export methods, they are now handled by UNVConverter.

Fri Apr 29 12:32:07 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MMesh3DReader.java: Modify reader so that it works also when groups are deleted from jcae3d.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (inCircleTest3): Suppress flat triangles.  TODO: investigate why these flat triangles appear in algos2d.Insertion.

Tue Apr 26 16:02:23 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos1d/Compat1D2D.java: If curvature is very large and an absolute deflection is requested, there is no need to discretize because deflection will be small anyway.  This is similar to the fix in Metric3D at 2005-04-13.
	* src/org/jcae/mesh/mesher/algos1d/Compat1D2D.java: If a curvature is not defined, try with a near point.

Thu Apr 21 15:26:27 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Write nodes in the same order as in binary files.
	* src/org/jcae/mesh/xmldata/MeshReader.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Write adjacency relations into binary files.

Wed Apr 20 14:00:45 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/validation: New classes to check generated meshes.
	* src/org/jcae/mesh/xmldata/MMesh3DReader.java: Do not abort if the normals file was not generated.

Thu Apr 14 09:29:10 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/masher/ds: Move 3D classes into...
	* src/org/jcae/mesh/amibe/ds: ... amibe...
	* src/org/jcae/mesh/amibe/algos2d/EnforceAbsDeflection.java
	  src/org/jcae/mesh/amibe/util/Octree.java
	  src/org/jcae/mesh/amibe/util/OctreeTest.java
	  src/org/jcae/mesh/amibe/util/tests/OctreeTestDisplayPLY.java
	  src/org/jcae/mesh/amibe/util/tests/OctreeTestRemove.java
	  src/org/jcae/mesh/mesher/algos3d/Fuse.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java
	  src/org/jcae/mesh/xmldata/MMesh3DWriter.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java: ... and adapt other classes.
	* src/org/jcae/mesh/mesher/algos3d/Fuse.java: Move into...
	* src/org/jcae/mesh/amibe/algos3d/Fuse.java: ... amibe.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/mesher/ds/MNode2D.java: Store master MNode1D in Vertex.ref1d and MNode2D.ref1d so that some calls to getMaster() can be dropped.
	* src/org/jcae/mesh/mesher/ds/MNode1D.java: Rename getRef() into getCADVertex()...
	* src/org/jcae/mesh/xmldata/MMesh1DWriter.java
	  src/org/jcae/mesh/mesher/ds/MNode2D.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java:  ... and adapt other classes.
	* src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/mesher/ds/MNode2D.java: ref1d member is no more a MNode1D instance, but an int.  In 2D and 3D meshing, we do not need MNode1D objects but only unique identifiers to detect nodes sharing the same location.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/ds/MMesh3D.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Adapt other classes to this change.
	* src/org/jcae/mesh/xmldata/SubMesh2DReader.java
	  src/org/jcae/mesh/mesher/ds/SubMesh2D.java
	  src/org/jcae/mesh/mesher/ds/MFace2D.java
	  src/org/jcae/mesh/mesher/ds/MNode2D.java:  Remove these classes, they are no more used.

Wed Apr 13 11:19:36 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric3D.java: Fix setDeflection(), it was not taken into account with a deflection > 1.0.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java: Change iso() signature in Metric3D.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java (absDeflection): When deflection is larger than curvature, absDeflection() is replaced by a length criterion because curvature based computations do not make sense.

Tue Apr 12 16:52:17 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos1d/Refine.java
	  src/org/jcae/mesh/mesher/algos1d/UniformLength.java
	  src/org/jcae/mesh/mesher/algos1d/UniformLengthDeflection.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java: isSame() and equals() methods have been revisited in libOccJava.  Edges are now treated like other topological objedts, their orientation is not considered in equals() method.

Thu Apr  7 11:15:49 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java: Add a new boolean argument to absDeflection() and relDeflection() to select isotropic or anisotropic metrics.  The curvIso() method is then dropped and replaced by relDeflection(true).
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java: In org.jcae.mesh.amibe.algos2d.Insertion, mean lengths are targeted, and there is a sqrt(2) factor between mean and maximal lengths.  Metrics computed by relDeflection() and absDeflection() want to take maximal deflection into account, so a factor of 2 has to be introduced.
	* src/org/jcae/mesh/amibe/algos2d/EnforceAbsDeflection.java: New algorithm, to enforce absolute deflection.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java: Add a new org.jcae.mesh.amibe.ds.Metric3D.relativeDeflection property. It is true by default. If set to false, the deflection parameter is absolute.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/mesher/algos1d/Compat1D2D.java
	  src/org/jcae/mesh/mesher/algos1d/UniformLengthDeflection.java
	  src/org/jcae/mesh/cad/CADGeomCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java: This parameter must also be passed to 1D algorithms when deflection is used.

Wed Apr  6 08:52:58 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Raise an exception if the bounding box has no volume.
	* src/org/jcae/mesh/mesher/algos1d/UniformLengthDeflection.java: GCPnts_UniformAbscissa is no more used, so checks of parameters can be dropped.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java
	  src/org/jcae/mesh/cad/CADGeomCurve3D.java: New splitSubsegment() method, to refine an existing discretization.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java: Call curvIso() and not relDeflection() by default.
	* src/org/jcae/mesh/mesher/ds/MMesh1D.java: New getAdjacentFaces() method to retrieve the list of faces connected to a given edge.
	* src/org/jcae/mesh/mesher/algos1d/Compat1D2D.java: New algorithm.
	* src/org/jcae/mesh/Mesher.java: Call Compat1D2D() when a deflection parameter is specified.
	* src/org/jcae/mesh/amibe/metrics/Matrix2D.java (eigenvectors): Make this routine more robust, it sometimes failed.

Mon Apr  4 10:19:34 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java (inCircleTest3): When circumcenters cannot be computed, try to find circumcenters after flipping edge.  This improves some cases, flat triangles were not flipped.
	* src/org/jcae/mesh/amibe/ds/Triangle.java:  New isOuter() method.
	* src/org/jcae/mesh/amibe/algos2d/Insertion.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Use Triangle.isOuter().
	  
Fri Apr  1 10:41:11 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  If a wire has only one edge (because other edges are too short and thus ignored), it has to be fully discarded.  This problem occured in practive with a plate containing small holes.
	* src/org/jcae/mesh/Mesher.java:  If some faces could not be meshed, print a message giving their face number.

Thu Mar 31 14:27:28 CEST 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java: Rename curv() into relDeflection().  Add a new absDeflection() method.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java:  Revert the change introduced on Thu, 17 March 2005.  The right values seem to work fine now.

Fri Mar 25 14:17:50 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Smoothing of nodes has been broken recently, it is now fixed.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Add smoothing of nodes when deflection is used.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/metrics/Metric2D.java:  When length criterion is null, use the bounding box diagonal as an upper limit.  This way metrics are always bounded by safe values.

Thu Mar 24 10:27:49 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java: If a shape is reversed, invert triangles and normals when writing 3D files.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java: Prevent endless loop in Mesh.forceBoundaryEdge().
	* src/org/jcae/mesh/amibe/ds/Vertex.java: Fix computation of circumcenter in some degenerated cases.

Wed Mar 23 11:07:43 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Matrix2D.java (eigenvectors): If matrix is similar to identity, both eigenvectors were equal which caused failures about singular matrices.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Replace more occurences of Adaptor3d_Curve.value() by Adaptor3d_Curve.arrayValues().

Mon Mar 21 16:29:08 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/ds/MMesh0D.java: This class was inefficient when handling meshes with many vertices.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Call Adaptor3d_Curve.arrayValues to minimize jni calls.  This requires an up-to-date libOccJava.
	* src/org/jcae/mesh/mesher/ds/MMesh1D.java: duplicateEdges() had a quadratic complexity with respect to vertex number, it is now linear.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Add a new property org.jcae.mesh.amibe.ds.Mesh.cumulativeEpsilon.  If set to true, small boundary edges are cumulated to form longer edges.  This is not enabled by default because this breaks structured meshing.

Fri Mar 18 16:06:34 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  Fix constrained Delaunay meshing, a bug could prevent some faces to be meshed.
	* src/org/jcae/mesh/amibe/ds/Triangle.java: New centroid() method.
	* src/org/jcae/mesh/amibe/algos2d/Insertion.java: Try also to insert triangle centroid.
	* src/org/jcae/mesh/amibe/ds/Mesh.java (forceBoundaryEdge): Prevent endless loop.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java (curvIso): Metrics can be computed if only one of the min and max curvatures is null (e.g. on cylinders).  Previously it was not computed and the deflection criterion was not fulfilled.

Thu Mar 17 14:27:23 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: For yet unknown reasons it seems that replacing deflection factor by its square gives much better results.
	* src/org/jcae/mesh/amibe/algos2d/Insertion.java (compute): Make sure that the 'segments' variable is bounded.

Wed Mar 16 11:26:01 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/util
	  src/org/jcae/mesh/util: Remove several unused classes.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src/org/jcae/mesh/util/Calculs.java: Move 3D linear algebra operations from Calculs to Metric3D, and remove Calculs.java.

Wed Mar  9 10:32:43 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Fix .mesh file output when normals are not written.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: The deflection factor now really bounds the relative error between segment and arc lengths.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Fix discretizeMaxDeflection().
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java: Allow the length parameter to be null, metrics do then only depend on deflection.
	* src/org/jcae/mesh/amibe/ds/Mesh.java: If org.jcae.mesh.amibe.ds.Mesh.epsilon property is set, it overrides epsilon definition.
	* src/org/jcae/mesh/xmldata/UNVConverter.java: Display the number of nodes and triangles when exporting UNV file.

Tue Mar  8 13:42:15 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCShapeBuilder.java: Allow .stp extension for STEP files.

Tue Mar  8 11:06:00 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java: Display the total number of faces.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java: Write normals only if org.jcae.mesh.Mesher.writeNormals property is set to true. The normals file is really huge with large meshes, thus we need to disable this writing until some filtering is performed.
	* src/org/jcae/mesh/Mesher.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeDeflectionCurve3D.java: Rewrite 1D discretization stuff. OCCDiscretizeDeflectionCurve3D is removed and incorporated into OCCDiscretizeCurve3D. GCPnts_QuasiUniformDeflection is replaced by a home brewed algorithm.

Fri Mar  4 16:06:30 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeDeflectionCurve3D.java:  Temporarily uses GCPnts_QuasiUniformDeflection to perform 1D discretization with deflection.

Thu Mar  3 17:46:20 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Add methods to write files in the MESH format.
	* src/org/jcae/mesh/Mesher.java: The MMesh3D instance is no more needed, UNVConverter can convert our 3D mesh to UNV or MESH format without having to map the whole mesh into memory.

Thu Mar  3 14:37:33 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/MesherBig.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java: Synchronize with Mesher.java and fix bugs in MeshToMMesh3DConvert.
	* src/org/jcae/mesh/xmldata/jcae.dtd
	  src/org/jcae/mesh/xmldata/JCAEXMLData.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java: Write normals into jcae3d.
	* src/org/jcae/mesh/MesherBig.java: Renamed into ...
	* src/org/jcae/mesh/Mesher.java: The 3D Fuse algorithm is disabled for now, it needs to be adjusted so that it can be applied out of core.

Wed Mar  2 10:37:03 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCGeomSurface.java: New normal() method.  Requires an up-to-date libOccJava.
	* src/org/jcae/mesh/amibe/ds/Vertex.java: New getNormal() method.
	* src/org/jcae/mesh/amibe/ds/Mesh.java (writeUNV3D): Write surface normal at nodes into a 2414 UNV data field.
	* src/org/jcae/mesh/mesher/ds/MMesh3D.java
	  src/org/jcae/mesh/mesher/ds/SubMesh2D.java
	  src/org/jcae/mesh/xmldata/SubMesh2DReader.java
	  src/org/jcae/mesh/xmldata/SubMesh2DWriter.java: Remove more stuff from org.jcae.mesh.mesher about 2D meshing.
	* src/org/jcae/mesh/amibe/ds/Vertex.java: circumcenter() is private.  For efficiency reasons, circumcenter() now returns a static Vertex.
	* src/org/jcae/mesh/mesher/ds/MNode3D.java
	  src/org/jcae/mesh/mesher/ds/MMesh3D.java: Store normals to surfaces into MNode3D instances in MMesh3D.addSubMesh2D(), and write these normals in MMesh3D.writeMESH().
	* src/org/jcae/mesh/Mesher.java: Call writeMESH() for now to perform tests.

Tue Mar  1 12:52:15 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/CheckDelaunay.java:  New algorithm to enforce edges to be Delaunay compliant.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java: Fix IndexOutOfBoundsException.
	* src/org/jcae/mesh/mesher/InitialTriangulationException.java:  Rename into...
	* src/org/jcae/mesh/amibe/InitialTriangulationException.java:
	* src/org/jcae/mesh/amibe/InvalidFaceException.java: New file.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java: Degenerated edges are taken into account again, this is the only way to have nice meshes for cones. They are removed before Mesh is written onto disk by a new removeDegeneratedEdges() method.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java: New collapse() method, currently only used by Mesh.removeDegeneratedEdges.
	* src/org/jcae/mesh/amibe/ds/Vertex.java: New removeFromQuadTree() method.
	* src/org/jcae/mesh/mesher/ds/MEdge2D.java
	  src/org/jcae/mesh/mesher/ds/MFace2D.java
	  src/org/jcae/mesh/mesher/ds/MNode2D.java
	  src/org/jcae/mesh/mesher/ds/SubMesh2D.java
	  src/org/jcae/mesh/xmldata/SubMesh2DReader.java: Remove more stuff from org.jcae.mesh.mesher about 2D meshing.  MEdge2D is removed and MFace2D now contains an array of vertices.  With former classes, triangle orientation was lost in SubMesh2DReader.  This is now fixed and all triangles of a patch should have a coherent orientation in the 3D mesh.
	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java: Write an empty group when a face cannot be meshed, so that GUI can highlight these groups.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java (curvIso): Fix detection of infinite curvature.

Mon Feb 28 16:00:09 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Matrix2D.java (simultaneousReduction):  Fix test to detect similar matrices, an exception could be raised because singular matrices were wrongly reported.
	* src/org/jcae/mesh/amibe/util/QuadTree.java:  When searching for near vertex, all distances are computed with the metrics at the target point.  Otherwise getNearestVertexProcedure() could be wrong.
	* src/org/jcae/mesh/amibe/ds/tools/Calculus3D.java (distance): Set distance(a,b)=max(distance(a,b,a),distance(a,b,b)) instead of half-sum, this seems to give better results.

Fri Feb 25 15:00:00 CET 2005 Jerome Robert <jeromerobert@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Make the
	  UNVConverter fully IDEAS UNV compliant.

Fri Feb 25 09:56:03 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java: New writeMESH() and writeBB() methods to write data files for the medit visualization tool.
	* src/org/jcae/mesh/mesher/ds/MMesh3D.java: New writeMESH() method to write data files for the medit visualization tool.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java:  New stringCoefs() method, needed by Mesh.writeBB.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (CheckAndSwap):  When loop around a vertex is over, make another loop if swaps had been performed.  Sometimes a single loop is not enough.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (circumcenter):  Fix again test far circumcenters, otherwise s3ic.brep generate flat triangles with an edge length of 10.

Wed Feb 23 09:46:00 CET 2005 Jerome Robert <jeromerobert@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Fix a bug in
	  numbering of triangles in UNV export

Wed Feb 23 13:49:03 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/Octree.java:  New getMaxLevel() method.
	* src/org/jcae/mesh/amibe/util/Octree.java:  Fix deambulate(), this method could enter an infinite loop.  It was not used until now, but is called by getMaxLevel().
	* src/org/jcae/mesh/amibe/util/Octree.java:  New setBucketSize() method to dynamically change the maximal number of vertices allowed in an octree cell.

Tue Feb 22 16:27:31 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java:  An exception was raised when a small circular edge was discretized.

Fri Feb 18 14:28:00 CET 2005 Jerome Robert <jeromerobert@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/UNVConverter.java: Add a util class
	  which extract groups from the full mesh and write them to a UNV
	  file.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java: Fix a
	  IndexOutOfBoundsException exception
	* src/org/jcae/mesh/Mesher.java: Do not zip the UNV file if
	  org.jcae.mesh.unv.nogz=true
	* src/org/jcae/mesh/xmldata/ClassPathEntityResolver.java: Fix
	  java.lang.NullPointerException at
	  org.apache.crimson.parser.Parser2.parseInternal(Parser2.java:691).

Wed Feb  9 15:20:54 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/QuadTree.java (getNearestVertexProcedure):  Add a factor of 1.005 to take rounding errors into account when computing i2d.  A better approximation for this factor should be investigated.

Tue Feb  8 15:19:49 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/xmldata/MeshWriter.java
	  src/org/jcae/mesh/xmldata/SubMesh2DReader.java:  Change the structure of jcae2d files; boundary nodes are written at the bottom of nodes2d.bin, and refs1d.bin then contains the unique 1d label for all such nodes.
	* src/org/jcae/mesh/xmldata/MMesh3DWriter.java
	  src/org/jcae/mesh/xmldata/MMesh3DReader.java:  Change the structure of jcae3d files; boundary nodes are written at the bottom of nodes3d.bin, and refs1d.bin then contains the unique 1d label for all such nodes.
	* src/org/jcae/mesh/MesherBig.java
	  src/org/jcae/mesh/xmldata/MeshToMMesh3DConvert.java:  MesherBig is a replacement for Mesher; its main feature is to convert all 2D meshes to a 3D mesh without having to store the whole mesh in memory.  The Fuse 3d algorithm can no more be used, which is why a new MesherBig class was added until a new fuse can deal with this new data structure.

Tue Feb  8 10:58:49 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/amibe/util/QuadTree.java:  Fix bounding box computation in 2D space, a vertex located at the right or the top edge could be inserted into the wrong QuadTreeCell.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  If the initial mesh is not valid, something went wrong, so raise an exception so that it can get caught.
	* src/org/jcae/mesh/amibe/ds/Mesh.java (writeUNV3D):  Holes were not filtered out.

Mon Feb  7 15:04:44 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java:  A tolerance can be defined through org.jcae.mesh.tolerance property to call org.jcae.mesh.mesher.algos3d.Fuse algorithm.

Fri Feb  4 16:09:52 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/CADGeomSurface.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomSurface.java:  New d2U(), d2V() and dUV() methods.  Requires an up-to-date libOccJava.
	* src/org/jcae/mesh/amibe/ds/Mesh.java:  New writeGeom() method.

Mon Jan 31 11:53:03 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Matrix2D.java:  Change bound value for testing singular matrix from 1.e-10 to 1.e-40.  This value should certainly be modified again and depend upon discretization length.
	* src/org/jcae/mesh/mesher/algos1d/UniformLengthDeflection.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeDeflectionCurve3D.java:  New files...
	* src/org/jcae/mesh/cad/CADGeomCurve3D.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java
	  src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java: ... to implement a naive 1D discretization based on curve deflection.  It is only used to perform tests and is not enabled.
	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java (adjustAbscissas):  Move points only if their distribution gets improved.

Fri Jan 28 11:13:06 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java:  Fix more errors with simultaneous reduction of metrics, deflection should now work fine.
	* src/org/jcae/mesh/amibe/metrics/Matrix2D.java:  Move into its own class and do not herit from Matrix for performance reasons.

Thu Jan 27 12:33:43 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src-occ/org/jcae/mesh/cad/occ/OCCDiscretizeCurve3D.java:  First attempt to work around GCPnts_UniformAbscissa bugs by computing our own 1D discretization.
	* src-occ/org/jcae/mesh/cad/occ/OCCGeomCurve3D.java:  Use OCCDiscretizeCurve3D instead of GCPnts_UniformAbscissa to perform 1D discretization.
	* src/org/jcae/mesh/mesher/algos1d/UniformLength.java:  With OCCDiscretizeCurve3D, the second call to curve.discretize() has to be performed only if the number of points was modified.

Wed Jan 26 14:34:07 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java:  The epsilon criterion, useful to detect and ignore tiny edges, has been moved from SubMesh2D to Mesh.  Unfortunately it was no more set according tu face bounding box, this is restored now.

Tue Jan 25 11:22:40 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java:  Fix metrics' intersection.
	* src/org/jcae/mesh/amibe/algos2d/Insertion.java:  Computations of distances between vertices has to be identical when checking for tall and small edges.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (isSmallerDiagonale):  Swap edge only if the other diagonal is twice smaller.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java
	  src/org/jcae/mesh/amibe/metrics/Metric3D.java:  Fix computations when curvature is not defined, and perform small optimizations.

Wed Jan 19 12:06:50 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/QuadTree.java:  Fix an integer overflow, sometimes getNearestVertex() did not return the nearest vertex, and thus near points could be inserted.
	* src/org/jcae/mesh/amibe/ds/Vertex.java (isSmallerDiagonale):  It seems that using metrics on two points is enough, no need for all four points.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (swapOTriangle):  When an edge is swapped, all edges for both triangles must have their SWAPPED attribute cleared out.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (CheckAndSwap):  Add a new attribute to distinguish between initial triangulation and site insertion.  In the former case, isSmallerDiagonale() is called instead of isDelaunay();

Fri Jan 14 14:09:42 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/tools/Calculus3D.java:  distance(a,b) is computed by using both metrics on a and b, this gives better results on same faces.

Wed Jan 12 10:48:28 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java (circumcenter):  Fix test to detect far circumcenters.

Mon Jan 10 13:57:24 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/OTriangle.java (isDelaunay_isotropic):  Fix test to detect edges which cannot be swapped for geometrical reasons.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java:  Remove constant bitmaskclear and bitmaskclearAttr arrays.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (CheckAndSwap):  Set SWAPPED attribute when swapping an edge.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java (checkAndSwap):  Do not modify current class instance.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java
	  src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  Test on SWAPPED attribute is moved from OTriangle to BasicMesh.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  Tests for 3D edge swapping were performed onto wrong edges, initial mesh is now much better.
	* src/org/jcae/mesh/amibe/metrics/Metric2D.java:  Methods minEV() and maxEV() were broken, and thus Calculus3D.radius2d() was also wrong which in turn broke QuadTree.getNearestVertex(), the return value was not always the nearest point.

Fri Jan  7 09:50:55 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/metrics/Metric2D.java:  Replace the constructor Metric2D(double,double,double) by a constructor without arguments which returns an identity matrix.
	* src/org/jcae/mesh/amibe/ds/Vertex.java:  In getMetrics(), return an identity matrix after mesh.pushCompGeom(2) because calculus are then performed in 2D euclidian space.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  Initial point insertion can now be performed in 2D euclidian space.
	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/util/QuadTree.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java:  Reset metrics of all vertices when Mesh.pushCompGeom() is called, and also when Mesh.popCompGeom() is called if this changes the class of top-level element.
	* src/org/jcae/mesh/amibe/ds/OTriangle.java:  Add a new checkAndSwap() method.
	* src/org/jcae/mesh/amibe/algos2d/BasicMesh.java:  After boundary is rebuilt, all edges are checked to see if they are 3D-Delaunay.  As this criterion is checked only when points are inserted, some edges were wrong when few points are inserted.

Thu Jan  6 16:52:33 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/util/LongLong.java:  Fix the add() method, hi part was not incremented if lo became too high; as a consequence, results were not accurate around 0.
	* src/org/jcae/mesh/amibe/ds/Mesh.java:  Add an optional argument to isValid() in order to check a mesh before its boundary has been rebuilt.

Tue Jan  4 11:18:25 CET 2005 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos1d/Refine.java
	  src/org/jcae/mesh/mesher/algos1d/UniformLength.java
	  src/org/jcae/mesh/mesher/ds/MMesh1D.java:  Replace getTEdgeSet() by getTEdgeList() so that 1D mesh is reproducible.

Wed Dec 22 14:35:01 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java:  Fix a bogus test in inCircleTest3(), some triangles were not Delaunay.

Wed Dec 22 12:13:46 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/amibe/ds/Vertex.java
	  src/org/jcae/mesh/amibe/util/QuadTree.java
	  src/org/jcae/mesh/amibe/algos2d/BasicMesh.java
	  src/org/jcae/mesh/mesher/ds/SubMesh2D.java
	  src/org/jcae/mesh/xmldata/MeshWriter.java:  Previously Mesh structures were transformed into SubMesh2D after meshing; this is no more the case, we can now take full advantage of Mesh structures.
	* src/org/jcae/mesh/mesher/algos2d/RefineFace1.java
	  src/org/jcae/mesh/mesher/ds/tools/Edge2DSwapper.java
	  src/org/jcae/mesh/mesher/ds/tools/FindEdge2DCutter.java
	  src/org/jcae/mesh/mesher/ds/tools/HoleFiller.java: Obsolete classes.

Thu Dec 16 15:11:38 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/algos2d/CollapseEdges.java
	  src/org/jcae/mesh/mesher/algos2d/CutEdges.java
	  src/org/jcae/mesh/mesher/algos2d/ImproveDeflection.java
	  src/org/jcae/mesh/mesher/algos2d/InnerRefine.java
	  src/org/jcae/mesh/mesher/algos2d/InsertSink.java
	  src/org/jcae/mesh/mesher/algos2d/RefineFace0.java
	  src/org/jcae/mesh/mesher/algos2d/SmoothAngles.java
	  src/org/jcae/mesh/mesher/algos2d/SmoothNodes.java
	  src/org/jcae/mesh/mesher/algos2d/SmoothNodes3D.java
	  src/org/jcae/mesh/mesher/algos2d/TargetSize.java:  Remove these routines, they are useless in jCAE-mesher and are still available under jcae/jCAE.

Wed Dec 15 15:22:07 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java:  Write compressed UNV.

Fri Dec 10 09:59:05 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Mesh.java
	  src/org/jcae/mesh/java3d/ComputeEdgesConnectivity.java
	  src/org/jcae/mesh/java3d/XMLBranchGroup.java
	  src/org/jcae/mesh/mesher/ds/MMesh3D.java
	  src/org/jcae/mesh/mesher/ds/SubMesh2D.java
	  src/org/jcae/mesh/xmldata/XMLHelper.java:  More buffered I/O.

Thu Dec  9 13:53:44 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java (inCircleTest3):  If a triangle is too flat, swap edge even if triangles are then not Delaunay, it is worth avoiding flat triangles in 2D space.

	* src/org/jcae/mesh/Mesher.java:  Each 1d, 2d and 3d mesh generation can be called individually through -Dorg.jcae.mesh.Mesher.mesh{1,2,3}d command line flags.  The -Dorg.jcae.mesh.Mesher.meshFace flag specifies a unique surface number to be meshed.

	* src/org/jcae/mesh/mesher/ds/MMesh3D.java:  New getNumberOfNodes(), getNumberOfFaces() and getNumberOfGroups() methods.

	* src/org/jcae/mesh/xmldata/MMesh3DWriter.java
	  src/org/jcae/mesh/xmldata/SubMesh2DWriter.java:  Initialize hashes to their final size in order to prevent costful rehashing.

Tue Dec  7 13:58:20 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/mesher/ds/MFace3D.java:  Static allocation of node arrays.

	* src/org/jcae/mesh/xmldata/SubMesh2DReader.java:  By default do not look for free edges in this routine because this is time consuming on large meshes, and is only used with assertions.

	* src/org/jcae/mesh/xmldata:  Buffered I/O are much faster than unbuffered ones.

Mon Dec  6 14:58:01 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java:  When reading .igs or .step files, a .brep file is first written so that only brep files are considered later.  Previously this converted file had a .brep extension, it is replaced by .tmp.brep to minimize name clashes.
	* src/org/jcae/mesh/Mesher.java:  Rename load() method into mesh(), make it private and change its signature.

Mon Dec  6 14:06:25 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/occ:  Move to src-occ/org/jcae/mesh/cad/occ
	  These routines are put into a new jcae-mesherocc.jar archive.

Mon Dec  6 11:58:12 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/occ/OCCShapeBuilder.java:  Read .step files.

	* src/org/jcae/mesh/cad/CADGeomCurve2D.java
	  src/org/jcae/mesh/cad/occ/OCCGeomCurve2D.java:  New getRange() method.

	* src/org/jcae/mesh/cad/CADShape.java
	  src/org/jcae/mesh/cad/occ/OCCShape.java:  New writeNative() method to save shape into the native format.

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/TestMetrics.java:  Replace all references to org.jcae.opencascade.jni routines by generic org.jcae.mesh.cad ones.

Fri Nov 26 15:45:37 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/Insertion.java:  Curve length do not have to be very precise, so compute less intermediate nodes.

Fri Nov 26 15:34:32 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/tools/Calculus3D.java:  In distance(), do not subdivide into smaller segments.  This was very time consuming, and for unknow reasons gave worse meshes.

Fri Nov 26 10:35:22 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/algos2d/Insertion.java:  Do not insert more than 3 nodes on long edges, in order to prevent flat triangles.

Thu Nov 25 15:24:00 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/java3d:  Put back this simple viewer.

	* src/org/jcae/mesh/MeshView.java:  A main entry to display jcae3d meshes.

Thu Nov 25 12:30:12 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/cad/occ/OCCShapeBuilder.java
	  src/org/jcae/mesh/Mesher.java:  Interface of IGESControl_Reader in occjava.jar has changed.

Wed Nov 24 15:39:03 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/amibe/ds/Vertex.java:  Fix test for flat troamgles in circumcenter().

Tue Nov 23 10:19:22 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java:  Change argument order, and accept a new argument for deflection.  This needs to be synchronized with jcae-netbeans-mesh.
	* src/org/jcae/mesh/amibe/metrics/Metric3D.java:  Metrics can now be changed at run-time.  If deflection is null, computeMetric3DIso() is called for efficiency reasons.  Otherwise, metrics are computed by computeMetric3DCurvIso().

Fri Nov 19 18:04:51 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* src/org/jcae/mesh/Mesher.java
	  src/org/jcae/mesh/mesher/algos2d/RefineFace1.java: Call org.jcae.mesh.amibe.algos2d.Insertion instead of TargetSize, which means that all 2d algos now belong to amibe.

Fri Nov 19 16:51:29 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* Add this ChangeLog, build.properties and build.xml
	* Remove a bunch of useless files, mostly related to old UI
	  and Corba.
	* Remove:
	     org.jcae.mesh.algos
	     org.jcae.mesh.ds
	     org.jcae.mesh.mesher.algos2d.RefineFaceOld
	     org.jcae.mesh.util.Pair
	     org.jcae.mesh.Algo
	* src/org/jcae/mesh/util/Calculs.java: Remove unused methods.

Fri Nov 19 16:49:50 CET 2004 Denis Barbier <barbier@users.sourceforge.net>

	* Creation of the new jCAE-mesher module, by importing the tagged
	  version Before_copy_jCAE_mesher of jCAE.

