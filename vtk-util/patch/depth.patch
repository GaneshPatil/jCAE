This patch permits to not erase the depth buffer before a selection rendering. This permits to not have
to draw all the scene to check the visibility of an element.

diff --git a/Rendering/vtkOpenGLRenderer.cxx b/Rendering/vtkOpenGLRenderer.cxx
index 1d4a151..1cb5f99 100644
--- a/Rendering/vtkOpenGLRenderer.cxx
+++ b/Rendering/vtkOpenGLRenderer.cxx
@@ -1090,7 +1090,7 @@ void vtkOpenGLRenderer::PrintSelf(ostream& os, vtkIndent indent)
 }
 
 
-void vtkOpenGLRenderer::Clear(void)
+void vtkOpenGLRenderer::Clear()
 {
   GLbitfield  clear_mask = 0;
 
@@ -1104,7 +1104,10 @@ void vtkOpenGLRenderer::Clear(void)
     }
 
   glClearDepth(static_cast<GLclampf>(1.0));
-  clear_mask |= GL_DEPTH_BUFFER_BIT;
+  if(this->SelectMode == vtkRenderer::NOT_SELECTING || this->ClearDepthForSelection)
+    clear_mask |= GL_DEPTH_BUFFER_BIT;
 
   vtkDebugMacro(<< "glClear\n");
   glClear(clear_mask);
diff --git a/Rendering/vtkRenderer.cxx b/Rendering/vtkRenderer.cxx
index cab64f5..81e7202 100644
--- a/Rendering/vtkRenderer.cxx
+++ b/Rendering/vtkRenderer.cxx
@@ -78,6 +78,8 @@ vtkRenderer::vtkRenderer()
 
   this->LightFollowCamera = 1;
 
+  this->ClearDepthForSelection = 1;
+
   this->NumberOfPropsRendered = 0;
 
   this->PropArray                = NULL;
diff --git a/Rendering/vtkRenderer.h b/Rendering/vtkRenderer.h
index 9bcf0ae..d367d55 100644
--- a/Rendering/vtkRenderer.h
+++ b/Rendering/vtkRenderer.h
@@ -131,6 +131,13 @@ public:
   vtkBooleanMacro(AutomaticLightCreation,int);
 
   // Description:
+  // This is a flag that indicate if the depth buffer is erased or not
+  // before the pick selection. This permits to not draw all the components
+  // and only one that can be picked but checking anyway if they are visible or not.
+  // By default this flag is on.
+  vtkSetMacro(ClearDepthForSelection,int);
+  vtkBooleanMacro(ClearDepthForSelection,int);
+  // Description:
   // Ask the lights in the scene that are not in world space
   // (for instance, Headlights or CameraLights that are attached to the 
   // camera) to update their geometry to match the active camera.
@@ -461,6 +468,8 @@ protected:
   // Allocate the time for each prop
   void               AllocateTime();
 
+  int                ClearDepthForSelection;
+
   // Internal variables indicating the number of props
   // that have been or will be rendered in each category.
   int                NumberOfPropsRendered;
